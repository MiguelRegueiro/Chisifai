{"ast":null,"code":"// apiService.js - API service module to connect with FastAPI backend\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Generic API fetch function with error handling\nconst apiFetch = async endpoint => {\n  try {\n    // Add timeout to prevent hanging requests\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      signal: controller.signal\n    });\n    clearTimeout(timeoutId);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    if (error.name === 'AbortError') {\n      console.error(`Request timeout for ${endpoint}`);\n    } else {\n      console.error(`Error fetching from ${endpoint}:`, error.message);\n    }\n    return null;\n  }\n};\n\n// Fetch telemetry data\nexport const fetchTelemetryData = async () => {\n  return (await apiFetch('/api/telemetry')) || [];\n};\n\n// Fetch KPIs\nexport const fetchKPIs = async () => {\n  return (await apiFetch('/api/kpis')) || {};\n};\n\n// Fetch alerts\nexport const fetchAlerts = async () => {\n  return (await apiFetch('/api/alerts')) || [];\n};\n\n// Fetch location data\nexport const fetchLocationData = async () => {\n  return (await apiFetch('/api/location')) || [];\n};","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","apiFetch","endpoint","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","signal","clearTimeout","ok","Error","status","data","json","error","name","console","message","fetchTelemetryData","fetchKPIs","fetchAlerts","fetchLocationData"],"sources":["/home/regueiro/Chisifai/frontend-chisifai/src/services/apiService.js"],"sourcesContent":["// apiService.js - API service module to connect with FastAPI backend\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n// Generic API fetch function with error handling\nconst apiFetch = async (endpoint) => {\n  try {\n    // Add timeout to prevent hanging requests\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      signal: controller.signal\n    });\n    \n    clearTimeout(timeoutId);\n    \n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    \n    const data = await response.json();\n    return data;\n  } catch (error) {\n    if (error.name === 'AbortError') {\n      console.error(`Request timeout for ${endpoint}`);\n    } else {\n      console.error(`Error fetching from ${endpoint}:`, error.message);\n    }\n    return null;\n  }\n};\n\n// Fetch telemetry data\nexport const fetchTelemetryData = async () => {\n  return await apiFetch('/api/telemetry') || [];\n};\n\n// Fetch KPIs\nexport const fetchKPIs = async () => {\n  return await apiFetch('/api/kpis') || {};\n};\n\n// Fetch alerts\nexport const fetchAlerts = async () => {\n  return await apiFetch('/api/alerts') || [];\n};\n\n// Fetch location data\nexport const fetchLocationData = async () => {\n  return await apiFetch('/api/location') || [];\n};\n\n"],"mappings":"AAAA;;AAEA,MAAMA,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;AAE7E;AACA,MAAMC,QAAQ,GAAG,MAAOC,QAAQ,IAAK;EACnC,IAAI;IACF;IACA,MAAMC,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;IACxC,MAAMC,SAAS,GAAGC,UAAU,CAAC,MAAMH,UAAU,CAACI,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;;IAE/D,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGZ,YAAY,GAAGK,QAAQ,EAAE,EAAE;MACzDQ,MAAM,EAAEP,UAAU,CAACO;IACrB,CAAC,CAAC;IAEFC,YAAY,CAACN,SAAS,CAAC;IAEvB,IAAI,CAACG,QAAQ,CAACI,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBL,QAAQ,CAACM,MAAM,EAAE,CAAC;IAC3D;IAEA,MAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;IAClC,OAAOD,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,IAAIA,KAAK,CAACC,IAAI,KAAK,YAAY,EAAE;MAC/BC,OAAO,CAACF,KAAK,CAAC,uBAAuBf,QAAQ,EAAE,CAAC;IAClD,CAAC,MAAM;MACLiB,OAAO,CAACF,KAAK,CAAC,uBAAuBf,QAAQ,GAAG,EAAEe,KAAK,CAACG,OAAO,CAAC;IAClE;IACA,OAAO,IAAI;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,kBAAkB,GAAG,MAAAA,CAAA,KAAY;EAC5C,OAAO,OAAMpB,QAAQ,CAAC,gBAAgB,CAAC,KAAI,EAAE;AAC/C,CAAC;;AAED;AACA,OAAO,MAAMqB,SAAS,GAAG,MAAAA,CAAA,KAAY;EACnC,OAAO,OAAMrB,QAAQ,CAAC,WAAW,CAAC,KAAI,CAAC,CAAC;AAC1C,CAAC;;AAED;AACA,OAAO,MAAMsB,WAAW,GAAG,MAAAA,CAAA,KAAY;EACrC,OAAO,OAAMtB,QAAQ,CAAC,aAAa,CAAC,KAAI,EAAE;AAC5C,CAAC;;AAED;AACA,OAAO,MAAMuB,iBAAiB,GAAG,MAAAA,CAAA,KAAY;EAC3C,OAAO,OAAMvB,QAAQ,CAAC,eAAe,CAAC,KAAI,EAAE;AAC9C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}