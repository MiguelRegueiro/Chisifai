{"ast":null,"code":"import React,{useState}from'react';import{Card}from'react-bootstrap';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import'leaflet/dist/leaflet.css';import L from'leaflet';import{useData}from'../contexts/DataContext';// Fix for default marker icons in Leaflet with React\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});const Map=()=>{const{locationData,loading}=useData();const[mapCenter]=useState([40.4168,-3.7038]);// Center on Spain\n// Determine map position based on active shipments\nconst getMapBounds=()=>{if(locationData&&locationData.length>0){const lats=locationData.map(loc=>loc.lat);const lngs=locationData.map(loc=>loc.lng);const southWest=L.latLng(Math.min(...lats)-0.1,Math.min(...lngs)-0.1);const northEast=L.latLng(Math.max(...lats)+0.1,Math.max(...lngs)+0.1);return L.latLngBounds(southWest,northEast);}return null;};return/*#__PURE__*/_jsxs(Card,{className:\"h-100\",children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Ubicaci\\xF3n de Env\\xEDos\"})}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:/*#__PURE__*/_jsx(\"div\",{style:{height:'400px'},children:/*#__PURE__*/_jsxs(MapContainer,{center:mapCenter,zoom:6,style:{height:'100%',width:'100%'},bounds:getMapBounds(),boundsOptions:{padding:[50,50]},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),locationData&&locationData.map(location=>/*#__PURE__*/_jsx(Marker,{position:[location.lat,location.lng],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:location.name}),/*#__PURE__*/_jsx(\"br\",{}),\"Temperatura: \",location.temp,\"\\xB0C\",/*#__PURE__*/_jsx(\"br\",{}),\"Fuerza G: \",location.gForce,\"G\"]})})},location.id)),loading&&locationData.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',color:'gray'},children:\"Cargando ubicaciones...\"})]})})})]});};export default Map;","map":{"version":3,"names":["React","useState","Card","MapContainer","TileLayer","Marker","Popup","L","useData","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Map","locationData","loading","mapCenter","getMapBounds","length","lats","map","loc","lat","lngs","lng","southWest","latLng","Math","min","northEast","max","latLngBounds","className","children","Header","Body","style","height","center","zoom","width","bounds","boundsOptions","padding","url","attribution","location","position","name","temp","gForce","id","top","left","transform","color"],"sources":["/home/regueiro/Chisifai/frontend-chisifai/src/components/Map.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Card } from 'react-bootstrap';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { useData } from '../contexts/DataContext';\n\n// Fix for default marker icons in Leaflet with React\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst Map = () => {\n  const { locationData, loading } = useData();\n  const [mapCenter] = useState([40.4168, -3.7038]); // Center on Spain\n\n  // Determine map position based on active shipments\n  const getMapBounds = () => {\n    if (locationData && locationData.length > 0) {\n      const lats = locationData.map(loc => loc.lat);\n      const lngs = locationData.map(loc => loc.lng);\n      const southWest = L.latLng(Math.min(...lats) - 0.1, Math.min(...lngs) - 0.1);\n      const northEast = L.latLng(Math.max(...lats) + 0.1, Math.max(...lngs) + 0.1);\n      return L.latLngBounds(southWest, northEast);\n    }\n    return null;\n  };\n\n  return (\n    <Card className=\"h-100\">\n      <Card.Header>\n        <h5 className=\"mb-0\">Ubicación de Envíos</h5>\n      </Card.Header>\n      <Card.Body className=\"p-0\">\n        <div style={{ height: '400px' }}>\n          <MapContainer \n            center={mapCenter} \n            zoom={6} \n            style={{ height: '100%', width: '100%' }}\n            bounds={getMapBounds()}\n            boundsOptions={{ padding: [50, 50] }}\n          >\n            <TileLayer\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            />\n            {locationData && locationData.map((location) => (\n              <Marker \n                key={location.id} \n                position={[location.lat, location.lng]}\n              >\n                <Popup>\n                  <div>\n                    <strong>{location.name}</strong><br/>\n                    Temperatura: {location.temp}°C<br/>\n                    Fuerza G: {location.gForce}G\n                  </div>\n                </Popup>\n              </Marker>\n            ))}\n            {loading && locationData.length === 0 && (\n              <div style={{ \n                position: 'absolute', \n                top: '50%', \n                left: '50%', \n                transform: 'translate(-50%, -50%)',\n                color: 'gray'\n              }}>\n                Cargando ubicaciones...\n              </div>\n            )}\n          </MapContainer>\n        </div>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default Map;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}